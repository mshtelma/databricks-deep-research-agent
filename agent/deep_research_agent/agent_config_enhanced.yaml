# Enhanced LangGraph Research Agent Configuration
# This file contains all configuration parameters for the multi-agent research system
# including planning, grounding, report styles, and agent-specific settings.

# Model Configuration with per-model parameters
models:
  default:
    endpoint: "databricks-gpt-oss-120b"
    temperature: 0.7
    max_tokens: 4000
    
  query_generation:
    endpoint: "databricks-gpt-oss-120b"
    temperature: 0.5  # Lower temperature for more focused queries
    max_tokens: 2000
    
  web_research:
    endpoint: "databricks-gpt-oss-120b"
    temperature: 0.7
    max_tokens: 4000
    
  reflection:
    endpoint: "databricks-gpt-oss-120b"
    temperature: 0.8  # Higher temperature for creative reflection
    max_tokens: 3000
    
  synthesis:
    endpoint: "databricks-gpt-oss-120b"
    temperature: 0.7
    max_tokens: 6000  # More tokens for comprehensive synthesis
    
  reasoning:
    endpoint: "databricks-gpt-oss-120b"  # Could be replaced with o1-style model
    temperature: 0.3  # Lower temperature for logical reasoning
    max_tokens: 8000
    
  embedding:
    endpoint: "databricks-gte-large-en"
    # No generation parameters needed for embedding

# Multi-Agent System Configuration
multi_agent:
  enabled: true
  agents:
    coordinator:
      enabled: true
      model: "default"
      
    planner:
      enabled: true
      model: "default"
      reasoning_model: "reasoning"  # Optional reasoning model for complex queries
      
    researcher:
      enabled: true
      model: "web_research"
      max_parallel_searches: 3
      
    fact_checker:
      enabled: true
      model: "default"
      
    reporter:
      enabled: true
      model: "synthesis"

# Planning Configuration
planning:
  enable_iterative_planning: true
  max_plan_iterations: 3
  plan_quality_threshold: 0.7
  enable_human_feedback: false
  auto_accept_plan: true
  enable_deep_thinking: false  # Use reasoning model for complex queries
  
  # Step configuration
  max_steps_per_plan: 10
  default_step_timeout: 60  # seconds
  allow_step_dependencies: true

# Background Investigation
background_investigation:
  enabled: true
  max_results: 5
  search_depth: "shallow"  # Options: shallow, medium, deep
  timeout_seconds: 30

# Research Behavior Configuration  
research:
  max_research_loops: 2
  initial_query_count: 3
  enable_streaming: true
  enable_citations: true
  timeout_seconds: 30
  max_retries: 3
  search_provider: "brave"  # Options: "tavily" or "brave"
  
  # Context accumulation
  enable_context_passing: true
  max_context_per_step: 1000  # tokens
  observation_memory_size: 20

# Grounding and Factuality Configuration
grounding:
  enabled: true
  verification_level: "moderate"  # Options: strict, moderate, lenient
  min_confidence_threshold: 0.7
  contradiction_handling: "flag"  # Options: flag, resolve, reject
  hallucination_prevention: true
  source_verification: true
  claim_extraction_model: "default"
  verification_passes: 2
  
  # Strictness by claim type
  claim_strictness:
    factual: 0.9
    statistical: 0.95
    opinion: 0.5
    prediction: 0.6
    quotation: 1.0

# Report Style Configuration
report:
  default_style: "professional"  # Options: academic, popular_science, news, social_media, professional, technical, executive
  available_styles:
    - academic
    - popular_science
    - news
    - social_media
    - professional
    - technical
    - executive
  
  # Style-specific settings
  style_settings:
    academic:
      citation_style: "APA"
      include_abstract: true
      include_methodology: true
      
    news:
      citation_style: "inline"
      include_lead: true
      inverted_pyramid: true
      
    technical:
      citation_style: "IEEE"
      include_specifications: true
      include_diagrams: false
      
    executive:
      citation_style: "footnotes"
      max_pages: 2
      include_summary: true

# Citation Configuration
citations:
  enabled: true
  default_style: "APA"  # Options: APA, MLA, Chicago, IEEE
  include_bibliography: true
  inline_citations: true
  max_citations_per_claim: 3
  prefer_primary_sources: true

# Reflexion Configuration
reflexion:
  enabled: true
  max_reflections: 3
  reflection_memory_size: 5
  include_factuality_reflection: true
  reflection_triggers:
    - low_confidence
    - high_contradictions
    - incomplete_coverage
    - factuality_issues

# Streaming Configuration
streaming:
  enabled: true
  chunk_size: 50
  word_boundary: true
  buffer_size: 1000
  stream_intermediate_results: true

# Phase 2 Components Configuration
phase_2:
  enable_semantic_deduplication: true
  similarity_threshold: 0.85
  enable_multi_model_support: true
  enable_cross_model_verification: false
  enable_tool_testing: false

# Tool Configuration
tools:
  max_concurrent_searches: 5
  cache_ttl_seconds: 3600
  enable_fallback: true
  
  # Search configuration
  search:
    max_results_per_query: 10
    enable_safe_search: true
    result_freshness: "any"  # Options: day, week, month, year, any
    
  # Vector search configuration
  vector_search:
    enabled: false
    collection_name: "research_docs"
    embedding_model: "databricks-gte-large-en"
    top_k: 5
    similarity_threshold: 0.7

# Rate Limiting Configuration
rate_limiting:
  max_requests_per_minute: 60
  max_tokens_per_minute: 100000
  max_parallel_requests: 10
  
  # Per-tool rate limits
  tool_limits:
    web_search:
      max_per_minute: 30
      cooldown_seconds: 2
    llm_calls:
      max_per_minute: 60
      cooldown_seconds: 1

# Error Handling
error_handling:
  max_retries: 3
  retry_delay_seconds: 2
  exponential_backoff: true
  fallback_to_cached: true
  continue_on_error: true

# Logging Configuration
logging:
  level: "INFO"  # Options: DEBUG, INFO, WARNING, ERROR
  include_timestamps: true
  log_api_calls: true
  log_tool_usage: true
  log_performance_metrics: true

# Performance Configuration
performance:
  enable_caching: true
  cache_ttl_hours: 24
  enable_parallel_processing: true
  batch_size: 5
  timeout_multiplier: 1.5

# Quality Metrics
quality_metrics:
  track_factuality: true
  track_coverage: true
  track_confidence: true
  min_acceptable_quality: 0.7
  quality_check_frequency: "always"  # Options: always, periodic, never

# Development Settings
development:
  debug_mode: false
  use_mock_data: false
  verbose_logging: false
  profile_performance: false
  save_intermediate_states: false

# Experimental Features (use with caution)
experimental:
  enable_multi_turn_planning: false
  enable_dynamic_tool_loading: false
  enable_cross_lingual_search: false
  enable_image_analysis: false
  enable_code_execution: false